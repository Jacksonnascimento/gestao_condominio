CREATE TABLE GC_PESSOA (
    PES_COD INT GENERATED BY DEFAULT AS IDENTITY,
    PES_NOME VARCHAR(100) NOT NULL,
    PES_CPF_CNPJ VARCHAR(14) UNIQUE NOT NULL,
    PES_TIPO CHAR(1) DEFAULT('F'),
    PES_EMAIL VARCHAR(100) UNIQUE NOT NULL,
    PES_TELEFONE VARCHAR (20),
    PES_TELEFONE2 VARCHAR (20),
    PES_ATIVO BOOLEAN DEFAULT true,
    PES_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    PES_DT_ATUALIZACAO TIMESTAMP,
    PES_SENHA_LOGIN VARCHAR(255) NULL,
    PES_IS_GLOBAL_ADMIN BOOLEAN NOT NULL DEFAULT false,
    PRIMARY KEY (PES_COD)
);

CREATE TABLE GC_ADMINISTRADORA (
    ADM_COD INT GENERATED BY DEFAULT AS IDENTITY,
    PES_COD INT NOT NULL,
    ADM_RESPONSAVEL INT NOT NULL,
    ADM_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    ADM_DT_ATUALIZACAO TIMESTAMP,
    ADM_ATIVO BOOLEAN DEFAULT true,
    PRIMARY KEY (ADM_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA (PES_COD),
    FOREIGN KEY (ADM_RESPONSAVEL) REFERENCES GC_PESSOA (PES_COD)
);

CREATE TABLE GC_CONDOMINIO (
    CON_COD INT GENERATED BY DEFAULT AS IDENTITY,
    CON_NOME VARCHAR(100) NOT NULL,
    CON_LOGRADOURO VARCHAR(100),
    CON_NUMERO VARCHAR(10),
    CON_COMPLEMENTO VARCHAR(50),
    CON_BAIRRO VARCHAR(50),
    CON_CIDADE VARCHAR(50),
    CON_ESTADO VARCHAR(2),
    CON_CEP VARCHAR (8),
    CON_PAIS VARCHAR(50) DEFAULT 'Brasil',
    CON_REFERENCIA VARCHAR(100),
    CON_NUMERO_UNIDADES INT,
    CON_TIPOLOGIA VARCHAR(50),
    CON_DT_VENCIMENTO_TAXA INT,
    ADM_COD INT,
    CON_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    CON_DT_ATUALIZACAO TIMESTAMP,
    CON_ATIVO BOOLEAN DEFAULT true,
    PRIMARY KEY (CON_COD),
    FOREIGN KEY (ADM_COD) REFERENCES GC_ADMINISTRADORA (ADM_COD)
);

CREATE TABLE GC_UNIDADE (
    UNI_COD INT GENERATED BY DEFAULT AS IDENTITY,
    UNI_STATUS_OCUPACAO VARCHAR(50),
    UNI_NUMERO VARCHAR(10) NOT NULL,
    CON_COD INT NOT NULL,
    UNI_DT_CADASTRO TIMESTAMP DEFAULT NOW() NOT NULL,
    UNI_DT_ATUALIZACAO TIMESTAMP,
    UNI_VALOR_TAXA_CONDOMINIO DECIMAL(10, 2) NOT NULL DEFAULT 0.00,
    UNI_ATIVA BOOLEAN DEFAULT true,
    PRIMARY KEY (UNI_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD)
);

CREATE TABLE GC_MORADOR (
    MOR_COD INT GENERATED BY DEFAULT AS IDENTITY,
    PES_COD INT NOT NULL,
    UNI_COD INT NOT NULL,
    MOR_TIPO_RELACIONAMENTO VARCHAR(50) NOT NULL,
    MOR_DT_CADASTRO TIMESTAMP DEFAULT NOW() NOT NULL,
    MOR_DT_ATUALIZACAO TIMESTAMP,
    PRIMARY KEY (MOR_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA (PES_COD),
    FOREIGN KEY (UNI_COD) REFERENCES GC_UNIDADE (UNI_COD),
    UNIQUE (PES_COD, UNI_COD)
);

CREATE TABLE GC_TIPO_COBRANCA (
    TIC_COD INT GENERATED BY DEFAULT AS IDENTITY,
    TIC_DESCRICAO VARCHAR(100) NOT NULL,
    TIC_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    TIC_DT_ATUALIZACAO TIMESTAMP,
    TIC_ATIVA BOOLEAN DEFAULT true,
    PRIMARY KEY (TIC_COD)
);

CREATE TABLE GC_FINANCEIRO_COBRANCA (
    FIC_COD INT GENERATED BY DEFAULT AS IDENTITY,
    UNI_COD INT NOT NULL,
    FIC_VALOR_TAXA DECIMAL(10, 2) NOT NULL,
    FIC_DT_VENCIMENTO DATE NOT NULL,
    FIC_DT_PAGAMENTO DATE,
    TIC_COD INT NOT NULL,
    FIC_VALOR_PAGO DECIMAL(10, 2),
    FIC_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    FIC_DT_ATUALIZACAO TIMESTAMP,
    FIC_STATUS_PAGAMENTO VARCHAR(50) NOT NULL DEFAULT 'A_VENCER',
    PRIMARY KEY (FIC_COD),
    FOREIGN KEY (UNI_COD) REFERENCES GC_UNIDADE (UNI_COD),
    FOREIGN KEY (TIC_COD) REFERENCES GC_TIPO_COBRANCA(TIC_COD)
);

CREATE TABLE GC_GESTAO_COMUNICACAO(
    COM_COD INT GENERATED BY DEFAULT AS IDENTITY,
    CON_COD INT NOT NULL,
    COM_REMETENTE INT NOT NULL,
    COM_DES_TODOS VARCHAR(50) NOT NULL,
    COM_ASSUNTO VARCHAR(50) NOT NULL,
    COM_MENSAGEM VARCHAR(500) NOT NULL,
    COM_TIPO_NOTIFICACAO VARCHAR(50),
    COM_DT_CADASTRO TIMESTAMP DEFAULT NOW() NOT NULL,
    COM_DT_ATUALIZACAO TIMESTAMP,
    COM_DT_ENVIO TIMESTAMP NULL,
    PRIMARY KEY(COM_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD),
    FOREIGN KEY (COM_REMETENTE) REFERENCES GC_PESSOA(PES_COD)
);

CREATE TABLE GC_COMUNICADO_ENTREGA (
    CME_COD INT GENERATED BY DEFAULT AS IDENTITY,
    COM_COD INT NOT NULL,
    PES_COD INT NOT NULL,
    CME_STATUS_LEITURA BOOLEAN DEFAULT false NOT NULL,
    CME_DT_LEITURA TIMESTAMP NULL,
    CME_STATUS_ENVIO VARCHAR(20) DEFAULT 'PENDENTE' NOT NULL,
    CME_DT_ENVIO_INDIVIDUAL TIMESTAMP NULL,
    PRIMARY KEY (CME_COD),
    UNIQUE (COM_COD, PES_COD),
    FOREIGN KEY (COM_COD) REFERENCES GC_GESTAO_COMUNICACAO(COM_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA(PES_COD)
);

CREATE TABLE GC_TIPO_SOLICITACAO_MANUTENCAO (
    TSM_COD INT GENERATED BY DEFAULT AS IDENTITY,
    TSM_DESCRICAO VARCHAR(100) NOT NULL UNIQUE,
    TSM_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    TSM_DT_ATUALIZACAO TIMESTAMP,
    TSM_ATIVA BOOLEAN DEFAULT true,
    PRIMARY KEY (TSM_COD)
);

CREATE TABLE GC_SOLICITACAO_MANUTENCAO (
    SMA_COD INT GENERATED BY DEFAULT AS IDENTITY,
    CON_COD INT NOT NULL,
    UNI_COD INT NULL,
    PES_COD_SOLICITANTE INT NOT NULL,
    SMA_LOCAL_DESCRICAO VARCHAR(255),
    TSM_COD INT NOT NULL,
    SMA_DESCRICAO_PROBLEMA TEXT NOT NULL,
    SMA_STATUS VARCHAR(50) NOT NULL DEFAULT 'ABERTA',
    PES_COD_RESPONSAVEL INT NULL,
    SMA_DT_ABERTURA TIMESTAMP DEFAULT NOW(),
    SMA_DT_CONCLUSAO TIMESTAMP NULL,
    SMA_DT_ATUALIZACAO TIMESTAMP,
    PRIMARY KEY (SMA_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD),
    FOREIGN KEY (UNI_COD) REFERENCES GC_UNIDADE (UNI_COD),
    FOREIGN KEY (PES_COD_SOLICITANTE) REFERENCES GC_PESSOA (PES_COD),
    FOREIGN KEY (PES_COD_RESPONSAVEL) REFERENCES GC_PESSOA (PES_COD),
    FOREIGN KEY (TSM_COD) REFERENCES GC_TIPO_SOLICITACAO_MANUTENCAO (TSM_COD)
);

CREATE TABLE GC_AREA_COMUM (
    ARC_COD INT GENERATED BY DEFAULT AS IDENTITY,
    CON_COD INT NOT NULL,
    ARC_NOME VARCHAR(100) NOT NULL,
    ARC_DESCRICAO VARCHAR(500),
    ARC_REGRAS_USO TEXT,
    ARC_CAPACIDADE_MAXIMA INT,
    ARC_PERMITE_RESERVA BOOLEAN DEFAULT true NOT NULL,
    ARC_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    ARC_DT_ATUALIZACAO TIMESTAMP,
    PRIMARY KEY (ARC_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD)
);

CREATE TABLE GC_RESERVA_AREA_COMUM (
    RAC_COD INT GENERATED BY DEFAULT AS IDENTITY,
    ARC_COD INT NOT NULL,
    UNI_COD INT NOT NULL,
    PES_COD_SOLICITANTE INT NOT NULL,
    RAC_DATA_HORA_INICIO TIMESTAMP NOT NULL,
    RAC_DATA_HORA_FIM TIMESTAMP NOT NULL,
    RAC_STATUS VARCHAR(50) NOT NULL DEFAULT 'SOLICITADA',
    RAC_OBSERVACOES VARCHAR(500),
    RAC_DT_SOLICITACAO TIMESTAMP DEFAULT NOW(),
    RAC_DT_ATUALIZACAO TIMESTAMP,
    PRIMARY KEY (RAC_COD),
    FOREIGN KEY (ARC_COD) REFERENCES GC_AREA_COMUM (ARC_COD),
    FOREIGN KEY (UNI_COD) REFERENCES GC_UNIDADE (UNI_COD),
    FOREIGN KEY (PES_COD_SOLICITANTE) REFERENCES GC_PESSOA (PES_COD)
);

CREATE TABLE GC_ASSEMBLEIA (
    ASS_COD INT GENERATED BY DEFAULT AS IDENTITY,
    ASS_DESCRICAO VARCHAR(100) NOT NULL,
    ASS_DATA_HORA TIMESTAMP NOT NULL,
    ASS_STATUS VARCHAR(50) NOT NULL DEFAULT 'AGENDADA',
    ASS_DT_CADASTRO TIMESTAMP DEFAULT NOW(),
    ASS_DT_ATUALIZACAO TIMESTAMP,
    CON_COD INT NOT NULL,
    ASS_ATIVA BOOLEAN DEFAULT true,
    PRIMARY KEY (ASS_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD)
);

CREATE TABLE GC_ASSEMBLEIA_TOPICO(
    ASP_COD INT GENERATED BY DEFAULT AS IDENTITY,
    ASP_DESCRICAO VARCHAR(100) NOT NULL,
    ASS_COD INT NOT NULL,
    PRIMARY KEY (ASP_COD),
    FOREIGN KEY (ASS_COD) REFERENCES GC_ASSEMBLEIA (ASS_COD)
);

CREATE TABLE GC_ASSEMBLEIA_PARTICIPANTE(
    ASS_COD INT NOT NULL,
    PES_COD INT NOT NULL,
    ASP_PARTICIPACAO BOOLEAN DEFAULT false,
    PRIMARY KEY (ASS_COD, PES_COD),
    FOREIGN KEY (ASS_COD) REFERENCES GC_ASSEMBLEIA (ASS_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA(PES_COD)
);

CREATE TABLE GC_ASSEMBLEIA_VOTO (
    ASP_COD INT NOT NULL,
    PES_COD INT NOT NULL,
    ASV_VOTO VARCHAR(50) ,
    PRIMARY KEY (ASP_COD, PES_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA(PES_COD),
    FOREIGN KEY (ASP_COD) REFERENCES GC_ASSEMBLEIA_TOPICO (ASP_COD)
);

CREATE TABLE GC_USUARIO_CONDOMINIO (
    PES_COD INT NOT NULL,
    CON_COD INT NOT NULL,
    USC_PAPEL VARCHAR(50) NOT NULL,
    USC_DT_ASSOCIACAO TIMESTAMP DEFAULT NOW() NOT NULL,
    USC_ATIVO_ASSOCIACAO BOOLEAN DEFAULT true NOT NULL,
    USC_DT_ATUALIZACAO TIMESTAMP,
    PRIMARY KEY (PES_COD, CON_COD, USC_PAPEL),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA (PES_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD)
);

CREATE TABLE GC_DOCUMENTO (
    DOC_COD INT GENERATED BY DEFAULT AS IDENTITY,
    CON_COD INT NOT NULL,
    DOC_NOME VARCHAR(150) NOT NULL,
    DOC_TIPO VARCHAR(50) NOT NULL,
    DOC_CAMINHO_ARQUIVO VARCHAR(500) NOT NULL,
    ASS_COD INT NULL,
    PES_COD_UPLOAD INT NOT NULL,
    DOC_PERMISSAO_VISUALIZAR CHAR(1) DEFAULT 'T' NOT NULL,
    DOC_DT_UPLOAD TIMESTAMP DEFAULT NOW(),
    DOC_DT_ATUALIZACAO TIMESTAMP,
    PRIMARY KEY (DOC_COD),
    FOREIGN KEY (CON_COD) REFERENCES GC_CONDOMINIO (CON_COD),
    FOREIGN KEY (ASS_COD) REFERENCES GC_ASSEMBLEIA (ASS_COD),
    FOREIGN KEY (PES_COD_UPLOAD) REFERENCES GC_PESSOA (PES_COD)
);

CREATE TABLE GC_DOCUMENTO_PERMISSAO_VISUALIZAR(
    DOC_COD INT NOT NULL,
    PES_COD INT NOT NULL,
    PRIMARY KEY (DOC_COD, PES_COD),
    FOREIGN KEY (DOC_COD) REFERENCES GC_DOCUMENTO (DOC_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA (PES_COD)
);

CREATE TABLE GC_ADMINISTRADORA_USUARIO (
    ADU_COD INT GENERATED BY DEFAULT AS IDENTITY,
    ADM_COD INT NOT NULL,
    PES_COD INT NOT NULL,
    ADU_PAPEL VARCHAR(50) NOT NULL,
    ADU_DT_CADASTRO TIMESTAMP DEFAULT NOW() NOT NULL,
    ADU_DT_ATUALIZACAO TIMESTAMP,
    ADU_ATIVO BOOLEAN DEFAULT true NOT NULL,
    PRIMARY KEY (ADU_COD),
    UNIQUE (ADM_COD, PES_COD, ADU_PAPEL),
    FOREIGN KEY (ADM_COD) REFERENCES GC_ADMINISTRADORA (ADM_COD),
    FOREIGN KEY (PES_COD) REFERENCES GC_PESSOA (PES_COD)
);